# Escenarios de tests CatalogNormalizer

| Caso de test                          | Escenario                                   | Input (raw_items)                                                          | Comportamiento esperado                                 | Output / Excepción                      |
| ------------------------------------- | ------------------------------------------- | -------------------------------------------------------------------------- | -------------------------------------------------------- | --------------------------------------- |
| normalize_valid_single_item           | Item válido con required fields             | Lista con 1 dict con `item_id`, `name`, `category`, `description`           | Normaliza keys y values                                 | Lista con 1 dict normalizado            |
| normalize_valid_multiple_items        | Varios items válidos                        | Lista de dicts válidos                                                      | Normaliza todos los items                               | Lista de dicts normalizados             |
| normalize_ignores_optional_fields     | Item con campos opcionales                  | Dict con `unit`, `provider`, etc.                                           | Mantiene y normaliza opcionales                         | Dict normalizado con opcionales         |
| normalize_missing_required_field      | Falta required field                        | Dict sin `name` o `category`                                                | Detecta input inválido                                  | CatalogNormalizationException           |
| normalize_item_not_dict               | Item no es dict                             | Lista con string / list / int                                               | Input estructuralmente inválido                         | CatalogNormalizationException           |
| normalize_trims_and_lowercases_keys   | Keys con espacios y mayúsculas              | `" Item_ID "`                                                              | Normaliza key                                           | `item_id`                               |
| normalize_trims_and_lowercases_values | Values con espacios y mayúsculas            | `"  PRODUCTO A  "`                                                         | Normaliza value                                         | `"producto a"`                          |
| normalize_empty_raw_items_list        | Lista vacía                                 | `[]`                                                                       | No itera, no valida                                     | `[]`                                    |
| normalize_attributes_non_string       | attributes con tipo inválido                | `"attributes": 123`                                                        | No valida dominio, solo pasa el valor                   | Lista normalizada (falla luego)         |
