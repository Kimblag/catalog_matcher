# Escenarios de tests – CatalogRepositoryCSV

| Caso de test                                   | Escenario                                  | Setup                          | Entrada                          | Comportamiento esperado                              | Resultado esperado                                      |
| --------------------------------------------- | ------------------------------------------ | ------------------------------ | -------------------------------- | ---------------------------------------------------- | ------------------------------------------------------- |
| get_when_file_does_not_exist_returns_empty     | Archivo CSV inexistente                    | Repo con path a archivo nuevo  | —                                | Maneja ausencia de archivo                           | Retorna `[]`                                           |
| get_when_file_exists_returns_rows              | Archivo CSV existente con datos            | CSV creado previamente         | —                                | Lee contenido del archivo                            | Lista de dicts con las filas                           |
| save_when_catalog_is_empty_writes_header_only  | Guardado sin ítems                         | Repo con path válido           | `[]`                             | Crea archivo con encabezado                          | CSV existe con solo header                             |
| save_when_catalog_has_items_persists_rows      | Guardado con ítems válidos                 | Repo con path válido           | Lista de ítems                   | Serializa y persiste                                 | CSV contiene filas esperadas                           |
| save_should_ignore_extra_fields                | Ítems con campos no definidos              | Repo con path válido           | Ítems con claves extra           | Ignora campos fuera de `_FIELDNAMES`                 | CSV no contiene columnas adicionales                  |
| save_should_serialize_attributes_as_json       | Campo `attributes` como dict               | Repo con path válido           | attributes dict                  | Serializa a string JSON                              | Valor almacenado es JSON válido                        |
| save_should_default_active_to_true             | Campo `active` ausente                     | Repo con path válido           | Ítem sin `active`                | Asigna valor por defecto                             | `active` guardado como `"true"`                        |
| get_after_save_should_return_raw_storage_format| Lectura posterior a guardado               | save ejecutado previamente     | —                                | No deserializa ni transforma                         | `attributes` y `active` son strings                   |
