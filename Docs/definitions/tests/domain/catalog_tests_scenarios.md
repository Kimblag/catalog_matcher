| Test Name                                | Método / Comportamiento     | Escenario                           | Entrada                                             | Salida esperada / Assert principal                                                                         | Notas                                       |
| ---------------------------------------- | --------------------------- | ----------------------------------- | --------------------------------------------------- | ---------------------------------------------------------------------------------------------------------- | ------------------------------------------- |
| `add_or_update_item_new`                 | `add_or_update_item`        | Agregar item nuevo                  | Primitivos válidos para un item                     | Item agregado al dict, versión incrementada, `last_updated` actualizado                                    | Happy path                                  |
| `add_or_update_item_update`              | `add_or_update_item`        | Actualizar item existente           | Primitivos con campos distintos al actual           | Item actualizado en el dict, versión **no incrementada**                                                   | Verifica que replace funciona correctamente |
| `add_or_update_item_invalid`             | `add_or_update_item`        | Item con datos inválidos            | Campos inválidos (`name=""`, `category=None`, etc.) | Lanza `InvalidCatalogItemException`                                                                        | Item no se agrega                           |
| `add_or_update_items_batch_all_valid`    | `add_or_update_items_batch` | Batch de items válidos              | Lista de dicts válidos                              | Todos los items agregados, versión incrementada, `last_updated` actualizado, errores = {}                  | Happy path                                  |
| `add_or_update_items_batch_some_invalid` | `add_or_update_items_batch` | Batch con algunos items inválidos   | Lista de dicts donde algunos tienen datos inválidos | Items válidos agregados, items inválidos en dict de errores, versión incrementada si al menos uno agregado | Verifica que batch no rompe                 |
| `add_or_update_items_batch_all_invalid`  | `add_or_update_items_batch` | Batch con todos inválidos           | Lista de dicts todos inválidos                      | No se agrega ningún item, dict de errores contiene todos los items, versión **no incrementada**            | Edge case                                   |
| `activate_item_existing`                 | `activate_item`             | Activar item activo o inactivo      | Item_id existente                                   | Item actualizado con `active=True`                                                                         | Happy path                                  |
| `activate_item_not_found`                | `activate_item`             | Activar item inexistente            | Item_id no existe                                   | Lanza `ItemNotFoundException`                                                                              | Error handling                              |
| `deactivate_item_existing`               | `deactivate_item`           | Desactivar item activo              | Item_id existente                                   | Item actualizado con `active=False`                                                                        | Happy path                                  |
| `deactivate_item_not_found`              | `deactivate_item`           | Desactivar item inexistente         | Item_id no existe                                   | Lanza `ItemNotFoundException`                                                                              | Error handling                              |
| `update_item_name_existing`              | `update_item_name`          | Cambiar nombre de item existente    | Item_id existente, new_name válido                  | Item actualizado con nuevo nombre                                                                          | Happy path                                  |
| `update_item_name_not_found`             | `update_item_name`          | Item no existe                      | Item_id inexistente                                 | Lanza `ItemNotFoundException`                                                                              | Error handling                              |
| `update_item_category_existing`          | `update_item_category`      | Cambiar categoría de item existente | Item_id existente, new_category válido              | Item actualizado con nueva categoría                                                                       | Happy path                                  |
| `update_item_subcategory_existing`       | `update_item_subcategory`   | Cambiar subcategoría                | Item_id existente, new_subcategory válido           | Item actualizado con nueva subcategoría                                                                    | Happy path                                  |
| `update_item_description_existing`       | `update_item_description`   | Cambiar descripción                 | Item_id existente, new_description válido           | Item actualizado con nueva descripción                                                                     | Happy path                                  |
| `update_item_unit_existing`              | `update_item_unit`          | Cambiar unidad                      | Item_id existente, new_unit válido                  | Item actualizado con nueva unidad                                                                          | Happy path                                  |
| `update_item_provider_existing`          | `update_item_provider`      | Cambiar proveedor                   | Item_id existente, new_provider válido              | Item actualizado con nuevo proveedor                                                                       | Happy path                                  |
| `update_item_attributes_existing`        | `update_item_attributes`    | Reemplazar atributos                | Item_id existente, new_attributes válido            | Item actualizado con atributos reemplazados                                                                | Happy path                                  |
| `get_version_initial`                    | `get_version`               | Version inicial                     | Catalog recién creado                               | Devuelve 0                                                                                                 | Getter                                      |
| `get_version_after_add`                  | `get_version`               | Version después de add              | Se agrega un item                                   | Devuelve 1                                                                                                 | Getter                                      |
| `get_last_updated`                       | `get_last_updated`          | Última actualización                | Después de add o batch                              | Devuelve datetime reciente                                                                                 | Getter                                      |
| `get_source`                             | `get_source`                | Obtener source                      | Catalog con source asignado                         | Devuelve nombre del enum                                                                                   | Getter                                      |
| `get_items`                              | `get_items`                 | Obtener items                       | Catalog con items                                   | Devuelve copia del dict de items                                                                           | Verifica inmutabilidad del dict retornado   |
